function initHamsterKeyGenerator(){let e=document.querySelector(".hamster-key-generator"),t={1:{name:"Riding Extreme 3D",appToken:"d28721be-fd2d-4b45-869e-9f253b554e50",promoId:"43e35910-c168-4634-ad4f-52fd764a843f",timing:3e4,attempts:25},2:{name:"Chain Cube 2048",appToken:"d1690a07-3780-4068-810f-9b5bbf2931b2",promoId:"b4170868-cef0-424f-8eb9-be0622e8e8e3",timing:3e4,attempts:20},3:{name:"My Clone Army",appToken:"74ee0b5b-775e-4bee-974f-63e7f4d5bacb",promoId:"fe693b26-b342-4159-8808-15e3ff7f8767",timing:18e4,attempts:30},4:{name:"Train Miner",appToken:"82647f43-3f87-402d-88dd-09a90025313f",promoId:"c4480ac7-e178-4973-8061-9ed5b2e17954",timing:3e4,attempts:15},5:{name:"Merge Away",appToken:"8d1cc2ad-e097-4b86-90ef-7a27e19fb833",promoId:"dc128d28-c45b-411c-98ff-ac7726fbaea4",timing:3e4,attempts:25},6:{name:"Twerk Race 3D",appToken:"61308365-9d16-4040-8bb0-2f4a4c69074c",promoId:"61308365-9d16-4040-8bb0-2f4a4c69074c",timing:3e4,attempts:20},7:{name:"Polysphere",appToken:"2aaf5aee-2cbc-47ec-8a3f-0962cc14bc71",promoId:"2aaf5aee-2cbc-47ec-8a3f-0962cc14bc71",timing:2e4,attempts:20},8:{name:"Mow and Trim",appToken:"ef319a80-949a-492e-8ee0-424fb5fc20a6",promoId:"ef319a80-949a-492e-8ee0-424fb5fc20a6",timing:2e4,attempts:20},9:{name:"Mud Racing",appToken:"8814a785-97fb-4177-9193-ca4180ff9da8",promoId:"8814a785-97fb-4177-9193-ca4180ff9da8",timing:2e4,attempts:20}},a=e.querySelectorAll(".game-option"),n=e.querySelector("#keyCountGroup"),i=e.querySelector("#keyRange"),r=e.querySelector("#keyValue"),o=e.querySelector("#startBtn"),d=e.querySelector("#progressContainer"),s=e.querySelector("#progressBar"),l=e.querySelector("#progressText"),c=e.querySelector("#progressLog"),$=e.querySelector("#keyContainer"),p=e.querySelector("#keysList"),m=e.querySelector("#copyAllBtn"),y=e.querySelector("#generatedKeysTitle"),f=e.querySelector("#copyStatus"),u=e.querySelector("#generateMoreBtn"),h=e.querySelector("#gameSelectContainer"),g=null;a.forEach(e=>{e.addEventListener("click",()=>{a.forEach(e=>e.classList.remove("selected")),e.classList.add("selected"),g=e.dataset.game,n.classList.remove("hidden"),o.classList.remove("hidden")})}),i.addEventListener("input",()=>{r.innerText=i.value});let b=async()=>{let a=parseInt(i.value);if(!g){alert("Please select a game first.");return}let r=parseInt(g),f=t[r];h.classList.add("hidden"),n.classList.add("hidden"),o.classList.add("hidden"),u.classList.add("hidden"),$.classList.add("hidden"),s.style.width="0%",l.innerText="0%",c.innerText="Starting...",d.classList.remove("hidden");let b=0,v=(e,t)=>{b+=e,s.style.width=`${b}%`,l.innerText=`${Math.round(b)}%`,c.innerText=t},w=async()=>{let e=x(),t;try{t=await _(e,f.appToken)}catch(n){return alert(`Failed to login: ${n.message}`),null}for(let i=0;i<f.attempts;i++){let r=await k(t,f.promoId);if(v(100/f.attempts/a,"Generating keys..."),r)break;await T(f.timing)}try{let o=await L(t,f.promoId);return v(100/a,"Generating key..."),o}catch(d){return alert(`Failed to generate key: ${d.message}`),null}},q=await Promise.all(Array.from({length:a},w));q.length>1?(p.innerHTML=q.filter(e=>e).map(e=>`<div class="key-item">
                    <input type="text" value="${e}" readonly>
                    <button class="copyKeyBtn" data-key="${e}">Copy Key</button>
                </div>`).join(""),m.classList.remove("hidden")):1===q.length&&q[0]&&(p.innerHTML=`<div class="key-item">
                    <input type="text" value="${q[0]}" readonly>
                    <button class="copyKeyBtn" data-key="${q[0]}">Copy Key</button>
                </div>`),$.classList.remove("hidden"),y.classList.remove("hidden"),d.classList.add("hidden"),u.classList.remove("hidden"),h.classList.add("hidden"),e.querySelectorAll(".copyKeyBtn").forEach(e=>{e.addEventListener("click",e=>{let t=e.target.getAttribute("data-key");S(t)})}),m.addEventListener("click",()=>{let e=q.filter(e=>e).join("\n");S(e)})};o.addEventListener("click",b),u.addEventListener("click",()=>{h.classList.remove("hidden"),n.classList.remove("hidden"),o.classList.remove("hidden"),u.classList.add("hidden"),$.classList.add("hidden")});let x=()=>{let e=Date.now(),t=Array.from({length:19},()=>Math.floor(10*Math.random())).join("");return`${e}-${t}`},_=async(e,t)=>{let a=await fetch("https://api.gamepromo.io/promo/login-client",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({appToken:t,clientId:e,clientOrigin:"deviceid"})});if(!a.ok)throw Error("Failed to login");let n=await a.json();return n.clientToken},k=async(e,t)=>{let a=await fetch("https://api.gamepromo.io/promo/register-event",{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({promoId:t,eventId:v(),eventOrigin:"undefined"})});if(!a.ok)return!1;let n=await a.json();return n.hasCode},L=async(e,t)=>{let a=await fetch("https://api.gamepromo.io/promo/create-code",{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({promoId:t})});if(!a.ok)throw Error("Failed to generate key");let n=await a.json();return n.promoCode},v=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){let t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}),T=e=>new Promise(t=>setTimeout(t,e)),S=e=>{if(navigator.clipboard&&navigator.clipboard.writeText)navigator.clipboard.writeText(e).then(()=>{f.classList.remove("hidden"),setTimeout(()=>f.classList.add("hidden"),2e3)}).catch(e=>{console.error("Failed to copy text: ",e)});else{let t=document.createElement("textarea");t.value=e,t.style.position="fixed",t.style.top="0",t.style.left="0",document.body.appendChild(t),t.focus(),t.select();try{let a=document.execCommand("copy");a&&(f.classList.remove("hidden"),setTimeout(()=>f.classList.add("hidden"),2e3))}catch(n){console.error("Fallback: Oops, unable to copy",n)}document.body.removeChild(t)}}}document.addEventListener("DOMContentLoaded",initHamsterKeyGenerator);
