function initHamsterKeyGenerator(){let e=document.querySelector(".hamster-key-generator"),t={1:{name:"Riding Extreme 3D",appToken:"d28721be-fd2d-4b45-869e-9f253b554e50",promoId:"43e35910-c168-4634-ad4f-52fd764a843f",timing:3e4,attempts:25},2:{name:"Chain Cube 2048",appToken:"d1690a07-3780-4068-810f-9b5bbf2931b2",promoId:"b4170868-cef0-424f-8eb9-be0622e8e8e3",timing:3e4,attempts:20},3:{name:"My Clone Army",appToken:"74ee0b5b-775e-4bee-974f-63e7f4d5bacb",promoId:"fe693b26-b342-4159-8808-15e3ff7f8767",timing:18e4,attempts:30},4:{name:"Train Miner",appToken:"82647f43-3f87-402d-88dd-09a90025313f",promoId:"c4480ac7-e178-4973-8061-9ed5b2e17954",timing:3e4,attempts:15},5:{name:"Merge Away",appToken:"8d1cc2ad-e097-4b86-90ef-7a27e19fb833",promoId:"dc128d28-c45b-411c-98ff-ac7726fbaea4",timing:3e4,attempts:25},6:{name:"Twerk Race 3D",appToken:"61308365-9d16-4040-8bb0-2f4a4c69074c",promoId:"61308365-9d16-4040-8bb0-2f4a4c69074c",timing:3e4,attempts:20},7:{name:"Polysphere",appToken:"2aaf5aee-2cbc-47ec-8a3f-0962cc14bc71",promoId:"2aaf5aee-2cbc-47ec-8a3f-0962cc14bc71",timing:2e4,attempts:20},8:{name:"Mow and Trim",appToken:"ef319a80-949a-492e-8ee0-424fb5fc20a6",promoId:"ef319a80-949a-492e-8ee0-424fb5fc20a6",timing:2e4,attempts:20},9:{name:"Mud Racing",appToken:"8814a785-97fb-4177-9193-ca4180ff9da8",promoId:"8814a785-97fb-4177-9193-ca4180ff9da8",timing:2e4,attempts:20},10:{name:"Tile Trio",appToken:"e68b39d2-4880-4a31-b3aa-0393e7df10c7",promoId:"e68b39d2-4880-4a31-b3aa-0393e7df10c7",timing:2e4,attempts:20},11:{name:"Zoopolis",appToken:"b2436c89-e0aa-4aed-8046-9b0515e1c46b",promoId:"b2436c89-e0aa-4aed-8046-9b0515e1c46b",timing:2e4,attempts:20},12:{name:"Fluff Crusade",appToken:"112887b0-a8af-4eb2-ac63-d82df78283d9",promoId:"112887b0-a8af-4eb2-ac63-d82df78283d9",timing:2e4,attempts:30}},a=e.querySelectorAll(".game-option"),n=e.querySelector("#keyCountGroup"),i=e.querySelector("#keyRange"),o=e.querySelector("#keyValue"),r=e.querySelector("#startBtn"),d=e.querySelector("#progressContainer"),s=e.querySelector("#progressBar"),c=e.querySelector("#progressText"),l=e.querySelector("#progressLog"),$=e.querySelector("#keyContainer"),p=e.querySelector("#keysList"),m=e.querySelector("#copyAllBtn"),y=e.querySelector("#generatedKeysTitle"),f=e.querySelector("#copyStatus"),b=e.querySelector("#generateMoreBtn"),_=e.querySelector("#gameSelectContainer"),u=null;a.forEach(e=>{e.addEventListener("click",()=>{a.forEach(e=>e.classList.remove("selected")),e.classList.add("selected"),u=e.dataset.game,n.classList.remove("hidden"),r.classList.remove("hidden")})}),i.addEventListener("input",()=>{o.innerText=i.value});let g=async()=>{let a=parseInt(i.value);if(!u){alert("Please select a game first.");return}let o=parseInt(u),f=t[o];_.classList.add("hidden"),n.classList.add("hidden"),r.classList.add("hidden"),b.classList.add("hidden"),$.classList.add("hidden"),s.style.width="0%",c.innerText="0%",l.innerText="Starting...",d.classList.remove("hidden");let g=0,T=(e,t)=>{g+=e,s.style.width=`${g}%`,c.innerText=`${Math.round(g)}%`,l.innerText=t},w=async()=>{let e=h(),t;try{t=await x(e,f.appToken)}catch(n){return alert(`Failed to login: ${n.message}`),null}for(let i=0;i<f.attempts;i++){let o=await k(t,f.promoId);if(T(100/f.attempts/a,"Generating keys..."),o)break;await v(f.timing)}try{let r=await L(t,f.promoId);return T(100/a,"Generating key..."),r}catch(d){return alert(`Failed to generate key: ${d.message}`),null}},C=await Promise.all(Array.from({length:a},w));C.length>1?(p.innerHTML=C.filter(e=>e).map(e=>`<div class="key-item">
                    <input type="text" value="${e}" readonly>
                    <button class="copyKeyBtn" data-key="${e}">Copy Key</button>
                </div>`).join(""),m.classList.remove("hidden")):1===C.length&&C[0]&&(p.innerHTML=`<div class="key-item">
                    <input type="text" value="${C[0]}" readonly>
                    <button class="copyKeyBtn" data-key="${C[0]}">Copy Key</button>
                </div>`),$.classList.remove("hidden"),y.classList.remove("hidden"),d.classList.add("hidden"),b.classList.remove("hidden"),_.classList.add("hidden"),e.querySelectorAll(".copyKeyBtn").forEach(e=>{e.addEventListener("click",e=>{let t=e.target.getAttribute("data-key");S(t)})}),m.addEventListener("click",()=>{let e=C.filter(e=>e).join("\n");S(e)})};r.addEventListener("click",g),b.addEventListener("click",()=>{_.classList.remove("hidden"),n.classList.remove("hidden"),r.classList.remove("hidden"),b.classList.add("hidden"),$.classList.add("hidden")});let h=()=>{let e=Date.now(),t=Array.from({length:19},()=>Math.floor(10*Math.random())).join("");return`${e}-${t}`},x=async(e,t)=>{let a=await fetch("https://api.gamepromo.io/promo/login-client",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({appToken:t,clientId:e,clientOrigin:"deviceid"})});if(!a.ok)throw Error("Failed to login");let n=await a.json();return n.clientToken},k=async(e,t)=>{let a=await fetch("https://api.gamepromo.io/promo/register-event",{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({promoId:t,eventId:T(),eventOrigin:"undefined"})});if(!a.ok)return!1;let n=await a.json();return n.hasCode},L=async(e,t)=>{let a=await fetch("https://api.gamepromo.io/promo/create-code",{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({promoId:t})});if(!a.ok)throw Error("Failed to generate key");let n=await a.json();return n.promoCode},T=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){let t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}),v=e=>new Promise(t=>setTimeout(t,e)),S=e=>{if(navigator.clipboard&&navigator.clipboard.writeText)navigator.clipboard.writeText(e).then(()=>{f.classList.remove("hidden"),setTimeout(()=>f.classList.add("hidden"),2e3)}).catch(e=>{console.error("Failed to copy text: ",e)});else{let t=document.createElement("textarea");t.value=e,t.style.position="fixed",t.style.top="0",t.style.left="0",document.body.appendChild(t),t.focus(),t.select();try{let a=document.execCommand("copy");a&&(f.classList.remove("hidden"),setTimeout(()=>f.classList.add("hidden"),2e3))}catch(n){console.error("Fallback: Oops, unable to copy",n)}document.body.removeChild(t)}}}document.addEventListener("DOMContentLoaded",initHamsterKeyGenerator);
