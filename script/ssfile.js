async function getFile(e){try{return await (await fetch("https://hi-techgfx.com/api.php/get-file",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fid:e})})).json()}catch(t){throw console.error("Error fetching file:",t),t}}function convertBytes(e){if(0==e)return"0 Bytes";let t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB","TB"][t]}function redirect(){let e=Math.floor(Math.random()*posts.length);window.location.href=posts[e]+"?firstOk"}let searchParams=new URLSearchParams(window.location.search),fileId=searchParams.get("f");const BOT="https://t.me/Sani_Files_Receiver_Bot";if(fileId&&(sessionStorage.setItem("fileId",fileId),history.replaceState(null,"","/"),getFile(fileId).then(e=>{if(!0===e.ok){let t=e.fname,n=convertBytes(e.fsize),l=fileId;document.getElementById("fileName").innerText=t,document.getElementById("fileSize").innerText=n,document.getElementById("fileInfo").style.display="block",l&&(document.getElementById("tgdown").href=`${BOT}?start=${l}`)}else throw Error("Something went wrong while fetching file data")}).catch(e=>{console.error(e),alert("Something Went Wrong!"),location.reload()}),document.getElementById("genlink").addEventListener("click",()=>{let e=8;document.getElementById("genlink").innerHTML='<i class="fa fa-cog fa-spin fa-1x fa-fw"></i> Please Wait';let t=setInterval(()=>{-1==--e&&(clearInterval(t),document.getElementById("genlink").style.display="none",document.getElementById("continue").style.display="block")},1500)},{once:!0})),searchParams.has("firstOk")){let e=sessionStorage.getItem("fileId");getFile(e).then(t=>{if(!0===t.ok){let n=t.fname,l=convertBytes(t.fsize),i=e;document.getElementById("fileName").innerText=n,document.getElementById("fileSize").innerText=l,document.getElementById("fileInfo").style.display="block",i&&(document.getElementById("tgdown").href=`${BOT}?start=${i}`)}else throw Error("Something went wrong while fetching file data")}).catch(e=>{console.error(e),alert("Something Went Wrong!"),location.reload()}),document.getElementById("genlink").addEventListener("click",()=>{let e=8;document.getElementById("genlink").innerHTML='<i class="fa fa-cog fa-spin fa-1x fa-fw"></i> Generating Link, Please Wait';let t=setInterval(()=>{-1==--e&&(clearInterval(t),document.getElementById("genlink").style.display="none",document.getElementById("tgdown").style.display="block")},1500)},{once:!0})}
