!function(){let e=document.getElementById("fileInput"),t=document.querySelector(".jx-widget .progress-bar"),l=document.querySelector(".jx-widget .progress"),n=document.getElementById("uploadForm"),a=document.getElementById("uploadModal"),i=document.getElementById("fileInfo"),o=document.getElementById("fileName"),s=document.getElementById("fileId"),r=document.getElementById("copyLink"),d=document.getElementById("warningMessage"),c=document.querySelector(".jx-widget .close");async function p(e){if(e.size>1073741824){alert("File size exceeds the limit of 1GB. Please choose a smaller file.");return}a.style.display="block",i.style.display="none",l.style.display="block",d.style.display="none";let n=Math.ceil(e.size/5242880),r=function e(t){let l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n="",a=l.length;for(let i=0;i<8;i++)n+=l.charAt(Math.floor(Math.random()*a));return n.toLowerCase()}(8);for(let c=0;c<n;c++){let p=e.slice(5242880*c,(c+1)*5242880),y=new FormData;y.append("chunk",p),y.append("index",c),y.append("totalChunks",n),y.append("fileName",e.name),y.append("fileId",r);try{let f=await fetch("https://cloud.easyupload.in/upload",{method:"POST",body:y}),u=await f.json();if(!u.ok)throw Error(u.err);let m=Math.round((c+1)/n*100);t.style.width=`${m}%`,t.setAttribute("aria-valuenow",m),t.textContent=`${m}%`,c===n-1&&(console.log("File uploaded successfully"),o.textContent=e.name,s.textContent=r,i.style.display="block",l.style.display="none",d.textContent="Please wait at least 15 minutes before sharing the link. In the meantime, our server will make the file more secure.",d.style.display="block")}catch(g){console.error("Error uploading chunk:",g),alert("Error uploading file. Please try again.");break}}}window.closeModal=function(){a.style.display="none",n.reset(),t.style.width="0%",t.textContent="0%",i.style.display="none",l.style.display="block",d.style.display="none"},c.onclick=closeModal,window.onclick=function(e){e.target==a&&closeModal()};let y=document.querySelector(".jx-widget .drop-zone");y.addEventListener("click",()=>{e.click()}),e.addEventListener("change",()=>{let t=e.files[0];t&&(t.size<=1073741824?p(t):(alert("File size exceeds the limit of 1GB. Please choose a smaller file."),e.value=""))}),r.addEventListener("click",()=>{let e=s.textContent,t=`https://cloud.easyupload.in/${e}`;navigator.clipboard.writeText(t).then(()=>{alert("Link copied to clipboard!")}).catch(e=>{console.error("Failed to copy link: ",e),alert("Failed to copy link. Please try again.")})}),window.addEventListener("beforeunload",()=>{n.reset()}),window.allowDrop=function e(t){t.preventDefault()},window.dropHandler=function e(t){t.preventDefault();let l;if(t.dataTransfer.items){for(let n=0;n<t.dataTransfer.items.length;n++)if("file"===t.dataTransfer.items[n].kind){l=t.dataTransfer.items[n].getAsFile();break}}else l=t.dataTransfer.files[0];l?l.size<=1073741824?p(l):alert("File size exceeds the limit of 1GB. Please choose a smaller file."):alert("No valid file was dropped.")}}();
