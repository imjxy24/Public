!function(){let e=document.getElementById("fileInput"),t=document.querySelector(".jx-widget .progress-bar"),l=document.querySelector(".jx-widget .progress"),n=document.getElementById("uploadForm"),o=document.getElementById("uploadModal"),a=document.getElementById("fileInfo"),i=document.getElementById("fileName"),s=document.getElementById("fileId"),r=document.getElementById("copyLink"),d=document.getElementById("warningMessage"),c=document.querySelector(".jx-widget .close");async function f(e){if(e.size>1073741824){alert("File size exceeds the limit of 1GB. Please choose a smaller file.");return}o.style.display="block",a.style.display="none",l.style.display="block",d.style.display="none";let n=function e(t){let l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n="",o=l.length;for(let a=0;a<8;a++)n+=l.charAt(Math.floor(Math.random()*o));return n.toLowerCase()}(8),r=new FormData;r.append("file",e),r.append("fileName",e.name),r.append("fileId",n);try{let c=new XMLHttpRequest;c.open("POST","https://cloud.easyupload.in/upload",!0),c.upload.onprogress=function(e){if(e.lengthComputable){let l=Math.round(e.loaded/e.total*100);t.style.width=`${l}%`,t.setAttribute("aria-valuenow",l),t.textContent=`${l}%`}},c.onload=function(){if(200===c.status){let t=JSON.parse(c.responseText);if(t.ok)console.log("File uploaded successfully"),i.textContent=e.name,s.textContent=n,a.style.display="block",l.style.display="none",d.textContent="Please wait at least 15 minutes before sharing the link. In the meantime, our server will make the file more secure.",d.style.display="block";else throw Error(t.err)}else throw Error("Upload failed")},c.onerror=function(){throw Error("Upload failed")},c.send(r)}catch(f){console.error("Error uploading file:",f),alert("Error uploading file. Please try again.")}}window.closeModal=function(){o.style.display="none",n.reset(),t.style.width="0%",t.textContent="0%",a.style.display="none",l.style.display="block",d.style.display="none"},c.onclick=closeModal,window.onclick=function(e){e.target==o&&closeModal()};let p=document.querySelector(".jx-widget .drop-zone");p.addEventListener("click",()=>{e.click()}),e.addEventListener("change",()=>{let t=e.files[0];t&&(t.size<=1073741824?f(t):(alert("File size exceeds the limit of 1GB. Please choose a smaller file."),e.value=""))}),r.addEventListener("click",()=>{let e=s.textContent,t=`https://cloud.easyupload.in/${e}`;navigator.clipboard.writeText(t).then(()=>{alert("Link copied to clipboard!")}).catch(e=>{console.error("Failed to copy link: ",e),alert("Failed to copy link. Please try again.")})}),window.addEventListener("beforeunload",()=>{n.reset()}),window.allowDrop=function e(t){t.preventDefault()},window.dropHandler=function e(t){t.preventDefault();let l;if(t.dataTransfer.items){for(let n=0;n<t.dataTransfer.items.length;n++)if("file"===t.dataTransfer.items[n].kind){l=t.dataTransfer.items[n].getAsFile();break}}else l=t.dataTransfer.files[0];l?l.size<=1073741824?f(l):alert("File size exceeds the limit of 1GB. Please choose a smaller file."):alert("No valid file was dropped.")}}();
